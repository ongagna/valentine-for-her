<!doctype html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üíå Une question pour toi</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1b0b2a;
      --card:#0f172aee;
      --text:#f8fafc;
      --muted:#cbd5e1;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 20%, rgba(167,139,250,.25), transparent 60%),
                  radial-gradient(1000px 700px at 80% 70%, rgba(251,113,133,.25), transparent 60%),
                  linear-gradient(140deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* petits c≈ìurs flottants */
    .heart{
      position:absolute;
      width:14px;height:14px;
      transform: rotate(45deg);
      background: rgba(251,113,133,.55);
      filter: drop-shadow(0 10px 20px rgba(251,113,133,.25));
      border-radius: 2px;
      animation: floatUp linear infinite;
      pointer-events:none;
    }
    .heart::before,.heart::after{
      content:"";
      position:absolute;
      width:14px;height:14px;
      border-radius:50%;
      background: inherit;
    }
    .heart::before{left:-7px;top:0}
    .heart::after{left:0;top:-7px}
    @keyframes floatUp{
      from{ transform: translateY(120vh) rotate(45deg); opacity:0}
      10%{opacity:1}
      to{ transform: translateY(-20vh) rotate(45deg); opacity:0}
    }

    .wrap{
      position:relative;
      height:100%;
      display:grid;
      place-items:center;
      padding:24px;
    }
    .card{
      width:min(720px, 92vw);
      background: var(--card);
      border: 1px solid rgba(148,163,184,.18);
      border-radius: 24px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 28px;
      position:relative;
      overflow:hidden;
    }
    .glow{
      position:absolute; inset:-80px;
      background: radial-gradient(circle at 30% 20%, rgba(251,113,133,.18), transparent 55%),
                  radial-gradient(circle at 75% 70%, rgba(167,139,250,.18), transparent 55%);
      filter: blur(18px);
      pointer-events:none;
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom:14px;
      position:relative;
      z-index:1;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius: 999px;
      background: rgba(2,6,23,.55);
      border: 1px solid rgba(148,163,184,.16);
      color: var(--muted);
      font-size: 13px;
    }
    .badge b{color:var(--text); font-weight:700}
    .mini{
      display:flex; align-items:center; gap:10px;
    }
    .toggle{
      cursor:pointer;
      border:1px solid rgba(148,163,184,.20);
      background: rgba(2,6,23,.45);
      color: var(--muted);
      border-radius: 999px;
      padding: 10px 12px;
      font-size: 13px;
      user-select:none;
    }
    .toggle:hover{color:var(--text); border-color: rgba(148,163,184,.35)}

    h1{
      margin: 6px 0 6px;
      font-size: clamp(26px, 3.5vw, 40px);
      line-height:1.15;
      position:relative;
      z-index:1;
    }
    p{
      margin: 8px 0;
      color: var(--muted);
      font-size: 16px;
      line-height:1.55;
      position:relative;
      z-index:1;
    }

    .photoRow{
      display:flex;
      gap:14px;
      align-items:center;
      margin: 18px 0 10px;
      position:relative;
      z-index:1;
    }
    .pic{
      width:64px;height:64px;
      border-radius: 18px;
      border:1px solid rgba(148,163,184,.20);
      background:
        radial-gradient(circle at 30% 30%, rgba(251,113,133,.35), transparent 60%),
        radial-gradient(circle at 70% 70%, rgba(167,139,250,.35), transparent 60%),
        rgba(2,6,23,.40);
      display:grid;
      place-items:center;
      font-size: 26px;
    }
    .names{display:flex; flex-direction:column; gap:2px;}
    .names .small{font-size:13px; color: rgba(203,213,225,.9)}
    .names .big{font-size:18px; font-weight:700}

    .question{
      margin-top: 16px;
      padding: 16px;
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,.16);
      background: rgba(2,6,23,.35);
      position:relative;
      z-index:1;
    }

    .btnRow{
      display:flex;
      gap:12px;
      margin-top: 14px;
      flex-wrap: wrap;
      position:relative;
      z-index:1;
    }
    button{
      cursor:pointer;
      border:none;
      border-radius: 16px;
      padding: 12px 16px;
      font-size: 16px;
      font-weight: 700;
      transition: transform .08s ease, filter .2s ease, opacity .2s ease;
      user-select:none;
    }
    button:active{transform: scale(.98)}
    .yes{
      background: linear-gradient(135deg, rgba(34,197,94,1), rgba(34,197,94,.75));
      color: #052e16;
      box-shadow: 0 16px 40px rgba(34,197,94,.22);
    }
    .yes:hover{filter:brightness(1.05)}
    .no{
      background: rgba(239,68,68,.10);
      color: rgba(248,250,252,.95);
      border: 1px solid rgba(239,68,68,.35);
    }
    .no:hover{filter:brightness(1.12)}
    .later{
      background: rgba(148,163,184,.10);
      color: rgba(248,250,252,.92);
      border: 1px solid rgba(148,163,184,.22);
      font-weight:600;
    }
    .later:hover{filter:brightness(1.10)}

    .status{
      margin-top: 12px;
      font-size: 14px;
      color: rgba(226,232,240,.9);
      min-height: 22px;
      position:relative;
      z-index:1;
    }

    .footer{
      margin-top: 18px;
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      color: rgba(203,213,225,.75);
      font-size: 12px;
      position:relative;
      z-index:1;
    }

    .confetti{
      position:absolute;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index: 2;
    }
    .piece{
      position:absolute;
      width:10px;height:16px;
      border-radius: 4px;
      opacity:.95;
      animation: fall 1200ms ease-in forwards;
    }
    @keyframes fall{
      0%{transform: translateY(-30px) rotate(0deg); opacity:1}
      100%{transform: translateY(110vh) rotate(540deg); opacity:0}
    }

    @media (max-width: 420px){
      .photoRow{flex-direction:column; align-items:flex-start}
      .pic{width:58px;height:58px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <div class="glow"></div>

      <div class="top">
        <div class="badge">üíó <b>√âdition Saint-Valentin 2026</b> ‚Ä¢ fait avec amour</div>
        <div class="mini">
          <div class="toggle" id="musicBtn">üéµ Musique : Off</div>
          <div class="toggle" id="resetBtn">‚Ü∫ Recommencer</div>
        </div>
      </div>

      <h1 id="title">Coucou b√©b√©, j‚Äôai fabriqu√© un petit univers pour toi ‚ú®</h1>
      <p id="subtitle">
        Une seule question. Z√©ro pression. Juste de la douceur, de l‚Äôhonn√™tet√©, et un peu de magie.
      </p>

      <div class="photoRow">
        <div class="pic">üíå</div>
        <div class="names">
          <div class="small">De</div>
          <div class="big" id="fromName">Steph</div>
          <div class="small" id="note">PS : tu es dangereusement belle aujourd‚Äôhui.</div>
        </div>
      </div>

      <div class="question" id="questionBox">
        <h1 style="margin:0; font-size: clamp(22px, 3.2vw, 34px);">Dorlane chou, veux-tu √™tre ma Valentine ? üåπ</h1>
        <p style="margin-top:8px">
          Choisis ce que tu aimerais üòå
        </p>

        <div class="btnRow">
          <button class="yes" id="yesBtn">Oui üíñ</button>
          <button class="no" id="noBtn">Non üôà</button>
          <button class="later" id="laterBtn">Pas maintenant / Je ne suis pas pr√™te</button>
        </div>

        <div class="status" id="status"></div>
      </div>

      <div class="footer">
        <div>Astuce : active la musique pour l‚Äôeffet complet.</div>
        <div id="tinySig">‚Äî sign√© : quelqu‚Äôun qui t‚Äôadore</div>
      </div>

      <div class="confetti" id="confetti"></div>
    </div>
  </div>

  <!-- Overlay: activation musique obligatoire (iPhone-friendly) -->
  <div id="musicGate" style="
    position:fixed; inset:0; z-index:9999;
    display:flex; align-items:center; justify-content:center;
    padding:24px;
    background: radial-gradient(900px 600px at 30% 20%, rgba(167,139,250,.25), transparent 60%),
                radial-gradient(800px 600px at 70% 80%, rgba(251,113,133,.25), transparent 60%),
                rgba(2,6,23,.88);
    backdrop-filter: blur(8px);
  ">
    <div style="
      width:min(560px, 94vw);
      border-radius:24px;
      border:1px solid rgba(148,163,184,.18);
      background: rgba(15,23,42,.92);
      box-shadow: 0 20px 60px rgba(0,0,0,.45);
      padding:22px;
      text-align:center;
    ">
      <div style="font-size:28px; margin-bottom:8px;">üéµüíñ</div>
      <div style="font-weight:900; font-size:18px; margin-bottom:6px;">
        Petite ambiance pour toi ch√©rie.
      </div>
      <div style="color: rgba(203,213,225,.9); font-size:14px; line-height:1.5; margin-bottom:14px;">
        Clique pour lancer la musique. (Tu peux la couper ensuite via le bouton ‚ÄúMusique‚Äù.)
      </div>

      <button id="enableMusicBtn" style="
        cursor:pointer;
        border:none;
        border-radius:16px;
        padding:12px 16px;
        font-size:15px;
        font-weight:900;
        background: linear-gradient(135deg, rgba(34,197,94,1), rgba(34,197,94,.75));
        color:#052e16;
        box-shadow: 0 16px 40px rgba(34,197,94,.18);
        width:100%;
      ">Activer la musique</button>

      <button id="skipMusicBtn" style="
        cursor:pointer;
        margin-top:10px;
        border-radius:16px;
        padding:12px 16px;
        font-size:14px;
        font-weight:800;
        background: rgba(148,163,184,.10);
        color: rgba(248,250,252,.92);
        border: 1px solid rgba(148,163,184,.22);
        width:100%;
      ">Continuer sans musique</button>
    </div>
  </div>

  <!-- Player YouTube cach√© -->
  <div id="ytWrap" style="position:fixed; width:1px; height:1px; overflow:hidden; left:-9999px; top:-9999px;">
    <div id="ytPlayer"></div>
  </div>
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    // ====== Personnalisation ======
    const HER_NAME = "Dorlane";
    const YOUR_NAME = "Steph";
    // =============================

    const title = document.getElementById("title");
    const subtitle = document.getElementById("subtitle");
    const statusEl = document.getElementById("status");
    const fromName = document.getElementById("fromName");
    const note = document.getElementById("note");

    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const laterBtn = document.getElementById("laterBtn");
    const resetBtn = document.getElementById("resetBtn");
    const musicBtn = document.getElementById("musicBtn");

    const confettiEl = document.getElementById("confetti");

    fromName.textContent = YOUR_NAME;
    note.textContent = `PS : ${HER_NAME}, tu rends mes journ√©es plus douces.`;

    // C≈ìurs flottants
    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      const left = Math.random() * 100;
      const dur = 6 + Math.random() * 8;
      const size = 10 + Math.random() * 14;
      h.style.left = left + "vw";
      h.style.animationDuration = dur + "s";
      h.style.width = size + "px";
      h.style.height = size + "px";
      h.style.opacity = String(0.25 + Math.random() * 0.6);
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), dur * 1000);
    }
    setInterval(spawnHeart, 300);

    // Confettis
    function confetti(intensity=120){
      const pieces = intensity;
      for(let i=0;i<pieces;i++){
        const p = document.createElement("div");
        p.className = "piece";
        p.style.left = (Math.random()*100) + "vw";
        p.style.top = (-20 - Math.random()*40) + "px";
        p.style.animationDuration = (900 + Math.random()*800) + "ms";
        const hue = Math.floor(Math.random()*360);
        p.style.background = `hsl(${hue} 90% 65%)`;
        confettiEl.appendChild(p);
        setTimeout(()=>p.remove(), 2000);
      }
    }

    // Sauvegarde l√©g√®re
    function saveChoice(choice){
      try{
        localStorage.setItem("valentine_choice", choice);
        localStorage.setItem("valentine_choice_time", new Date().toISOString());
      }catch(e){}
    }

    // ‚ÄúNon‚Äù = taquin mais respectueux
    const gentleNoPrompts = [
      "D‚Äôaccord üòå Et si je te faisais rire 10 secondes, √ßa compte ? üòÑ",
      "Ok‚Ä¶ mais imagine : d√Æner cosy + activit√© fun √† Paris. √áa tente (on oublie la Fommmmmmm üòÑ)? ‚ú®",
      "Je comprends üôà Derni√®re petite question : tu veux que je te surprenne doucement ? üíó",
      "C‚Äôest not√©. Mais tu sais quoi ? Je te trouve incroyablement pr√©cieuse. üåô"
    ];
    let noCount = 0;

    function updateNoButton(){
      const scale = Math.max(0.78, 1 - noCount*0.06);
      noBtn.style.transform = `scale(${scale})`;
      noBtn.style.opacity = String(Math.max(0.6, 1 - noCount*0.08));
      noBtn.textContent = noCount >= 3 ? "Non (toujours non) üôà" : "Non üôà";
    }

    noBtn.addEventListener("click", ()=>{
      noCount++;
      const idx = (noCount - 1) % gentleNoPrompts.length;
      title.textContent = gentleNoPrompts[idx];
      subtitle.textContent = "Hummmm l'histoire que j'ai engag√© ci, √ßa va me d√©passer üòå";
      statusEl.textContent = "Si tu veux dire non pour de vrai, clique ‚ÄúPas maintenant‚Äù ‚Äî et je respecte totalement, mais apr√®s supprime mon num√©ro hein.";
      updateNoButton();
      saveChoice("no_clicked");
    });

    yesBtn.addEventListener("click", ()=>{
      title.textContent = `OUI ?! üò≠üíñ`;
      subtitle.textContent = `${HER_NAME} chou Ikiiii tu viens de faire des salto √† mon c≈ìur.`;
      statusEl.textContent = "Ok. J‚Äôai un plan trop mignon‚Ä¶ pr√©pare-toi üòå";
      confetti(140);
      saveChoice("yes");

      // petit d√©lai, puis page 2
      setTimeout(() => {
        window.location.href = "./date.html";
      }, 900);

      yesBtn.disabled = true;
      noBtn.disabled = true;
      laterBtn.disabled = true;
      yesBtn.style.filter = "brightness(1.05)";
    });

    laterBtn.addEventListener("click", ()=>{
      title.textContent = "Merci pour ton honn√™tet√© ü§ç";
      subtitle.textContent = "Z√©ro souci. Je suis l√†, et je te respecte ‚Äî toujours.";
      statusEl.textContent = "Quand tu voudras, on en parle. Je t‚Äôenvoie de la douceur, pas de pression.";
      saveChoice("pas_maintenant");
    });

    resetBtn.addEventListener("click", ()=>{
      noCount = 0;
      title.textContent = "Coucou mon b√©b√©, j‚Äôai fabriqu√© un petit univers pour toi ‚ú®";
      subtitle.textContent = "Une seule question. Z√©ro pression. Juste de la douceur, de l‚Äôhonn√™tet√©, et un peu de magie.";
      statusEl.textContent = "";
      yesBtn.disabled = false; noBtn.disabled = false; laterBtn.disabled = false;
      noBtn.style.transform = "";
      noBtn.style.opacity = "";
      noBtn.textContent = "Non üôà";
      try{
        localStorage.removeItem("valentine_choice");
        localStorage.removeItem("valentine_choice_time");
        localStorage.removeItem("fun_activity_choice");
        localStorage.removeItem("date_plan_response");
        localStorage.removeItem("music_pref");
      }catch(e){}
      // r√©-afficher l‚Äôoverlay musique
      musicGate.style.display = "flex";
      stopYT();
      musicOn = false;
      setMusicLabel();
    });

    // ===== Musique YouTube (Adele - Someone Like You) =====
    let musicOn = false;
    let ytPlayer = null;

    const YT_VIDEO_ID = "hLQl3WQQoQ0"; // Adele - Someone Like You (YouTube)
    const musicGate = document.getElementById("musicGate");
    const enableMusicBtn = document.getElementById("enableMusicBtn");
    const skipMusicBtn = document.getElementById("skipMusicBtn");

    function setMusicLabel(){
      musicBtn.textContent = musicOn ? "üéµ Musique : On" : "üéµ Musique : Off";
    }
    setMusicLabel();

    window.onYouTubeIframeAPIReady = function () {
      ytPlayer = new YT.Player("ytPlayer", {
        height: "1",
        width: "1",
        videoId: YT_VIDEO_ID,
        playerVars: {
          autoplay: 0,
          controls: 0,
          disablekb: 1,
          fs: 0,
          modestbranding: 1,
          loop: 1,
          playlist: YT_VIDEO_ID
        },
        events: { onReady: () => {} }
      });
    };

    function startYT(){
      if(!ytPlayer) return;
      try{
        ytPlayer.unMute();
        ytPlayer.setVolume(55);
        ytPlayer.playVideo();
      }catch(e){}
    }

    function stopYT(){
      if(!ytPlayer) return;
      try{ ytPlayer.stopVideo(); }catch(e){}
    }

    // m√©morise le choix musique pour date.html
    function setMusicPref(pref){
      try{ localStorage.setItem("music_pref", pref); }catch(e){}
    }

    enableMusicBtn.addEventListener("click", () => {
      musicOn = true;
      setMusicLabel();
      setMusicPref("on");
      startYT();
      musicGate.style.display = "none";
    });

    skipMusicBtn.addEventListener("click", () => {
      musicOn = false;
      setMusicLabel();
      setMusicPref("off");
      stopYT();
      musicGate.style.display = "none";
    });

    // Toggle en haut √† droite
    musicBtn.addEventListener("click", () => {
      musicOn = !musicOn;
      setMusicLabel();

      if(musicOn){
        // Sur iPhone: il faut un geste utilisateur -> on r√©-affiche le gate
        setMusicPref("on");
        musicGate.style.display = "flex";
      } else {
        setMusicPref("off");
        stopYT();
      }
    });

    // Si l‚Äôutilisateur avait d√©j√† choisi ‚Äúoff‚Äù auparavant, on peut masquer direct (optionnel)
    // Ici on laisse le gate au premier chargement pour forcer la d√©cision.
  </script>
</body>
</html>
